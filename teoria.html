<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">

    <title>Spline Space</title>
    <link rel="shortcut icon" type="image/ico" href="images/favicon.ico"/>

    <!-- Gerard Stylesheet -->
    <link rel="stylesheet" type="text/css" href="style.css"/>

    <!-- Google -->
    <meta content="TOPBU-hLD3bnVo6E1puPdUFuR9G-6z3Mv18yJwf2iyY" name="google-site-verification"/>

    <!-- MathJax -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script async id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>
<body style="background-color: black;">

<div>
    <a href="index.html">
        <img src="images/title.png" class="img-fluid" alt="title">
    </a>

    <!-- MENU -->
    <div class="d-grid gap-2 d-md-block text-center" id="menu">
        <a href="index.html" class="btn btn-outline-light" role="button">Home</a>
        <a href="teoria.html" class="btn btn-light" role="button">Teoria</a>
        <a href="manuale.html" class="btn btn-outline-light" role="button">Manuale</a>
        <a href="applet.html" class="btn btn-outline-light" role="button">Applet</a>
    </div>


    <!-- BODY -->
    <div class="container-sm">
        <p>
            Nel seguente progetto sono state implementate le curve Spline. Le curve permettono al giocatore di
            tracciare un percorso che consente alla navicella di raccogliere i checkpoint predisposti nel
            livello.
        </p>

        <h2>Curve di B&eacute;zier</h2>

        <p>
            Il nome deriva dal francese Pierre B&eacute;zier (1920-1999) che pubblic&ograve; per primo un articolo,
            mentre
            lavorava
            presso la casa automobilistica Renault come disegnatore e progettista.
        </p>

        <p>
            Le curve di B&eacute;zier vengono definite a partire da un numero finito di punti P0, P1, ..., Pn che
            formano il
            poligono di controllo. P0 e Pn costituiscono rispettivamente l'inizio e la fine della curva, gli altri
            punti
            invece
            non si trovano sulla curva ma contribuiscono a modellarne la forma. Il grado della curva &egrave; dato
            dal numero
            dei punti del poligono di controllo -1. Per calcolare una curva di B&eacute;zier si pu&ograve;
            utilizzare
            l'algoritmo di
            De Castelau,
            un algoritmo ricorsivo che per una curva di grado n prevede n-1 passi ricorsivi.
        </p>

        <p>
            <img src="images/bezier2.png" width="500">
        </p>


        <h4>Algoritmo di De Casteljau</h4>
        <p>
            &Egrave; un metodo che permette di costruire in modo semplice e algoritmico le curve nello spazio aventi
            rappresentazione parametrica di tipo polinomiale. Fissato un valore \(\text{\(t \in [0,1]\)}\), esso
            permette di calcolare il punto corrispondente sulla curva \(c(t)\) mediante interpolazioni lineari
            ripetute
            a partire dai punti di controllo.
        </p>
        <p>
            Dati \(n+1\) punti , la curva di grado \(n\) &egrave; data dalla seguente equazione di ricorrenza:
        </p>
        <p>
            \[P_{i}^{k}(t)=(1-t)P_{i}^{k-1}(t) + tP_{i+1}^{k-1}(t) \quad \text{\(t \in [0,1]\)} \quad , \quad con
            \quad
            k=1,2, \cdots , n \quad , \quad i=0,1, \cdots , n-k\]
        </p>


        <h4>Curve di B&eacute;zier lineari</h4>
        <p>
            Dati due punti \(P_{0}\) e \(P_{1}\) dello spazio affine, la curva di B&eacute;zier determinata da
            questi
            due punti e l'interpolazione lineare del segmento che li congiunge. Essa si muove di moto rettilineo
            uniforme e la legge oraria che descrive questo moto &egrave;:
        </p>
        <p>
            \[P(t)=(1-t)P_{0}+tP_{1} \quad \text{\(t \in [0,1]\)}\]
        </p>
        <p>
            Il segmento si riduce ad un unico punto se \(P_{0} = P_{1}\).
        </p>
        <p>
            <img src="images/bl1.gif">
        </p>


        <h4>Curve di B&eacute;zier quadratiche</h4>
        <p>
            Dati tre punti \(P_{0}\), \(P_{1}\) e \(P_{2}\) dello spazio affine, possiamo iterare l'interpolazione
            lineare ottenendo cos&igrave; una curva di B&eacute;zier quadratica definita dalla funzione:
        </p>
        <p>
            \[P(t)=(1-t)^2 P_{0} + 2t(1-t)P_{1} + t^2 P_{2} \quad \text{\(t \in [0,1]\)}\]
        </p>
        <p>
            Se i tre punti sono allineati, si ottiene ancora un segmento, anche se non pi&ugrave; percorso a velocit&agrave;
            costante.
        </p>
        <p>
            <img src="images/bq2.gif">
        </p>


        <h4>Curve di B&eacute;zier cubiche</h4>
        <p>
            In modo analogo si definiscono le curve di B&eacute;zier di terzo grado, iterando una volta in pi&ugrave;
            il
            procedimento
            di interpolazione lineare. Dati 4 punti \(P_{0}\), \(P_{1}\), \(P_{2}\) e \(P_{3}\) la legge oraria che
            descrive questo moto &egrave; data dalla funzione parametrica:
        </p>
        <p>
            \[P(t)=(1-t)^3 P_{0} + 3t(1-t)^2 P_{1} + 3t^2(1-t) P_{2} + t^3 P_{3} \quad \text{\(t \in [0,1]\)}\]
        </p>
        <p>
            <img src="images/bc3.gif">
        </p>


        <h2>Curve Spline</h2>
        <p>
            Si pu&ograve; pensare alle curve Spline come attaccature di curve di B&eacute;zier, queste curve possono
            essere
            lineari,
            quadratiche, cubiche o di grado maggiore. Nel nostro caso si &egrave; deciso di utilizzare curve di B&eacute;zier
            di grado
            3 che ci permettono di tracciare il primo
            e l'ultimo punto di ogni segmento e utilizzare gli altri due punti per modificarne la forma.
        </p>
        <p>
            Uno dei principali vantaggi di una curva Spline &egrave; il fatto che la modifica di un punto di
            controllo non si ripercuote su tutta la curva ma
            solo su
            una sua parte, questo permette quindi un controllo locale di quest'ultima. Nel gioco questo vantaggio
            &egrave;
            rilevante perch&egrave; permette al giocatore di cambiare una singola traettoria senza modificare le
            altre
            preconfigurate.
        </p>

        <p>
            Esistono diverse classi di incollamento tra due curve \(P\) e \(Q\) (curve con lo stesso grado \(k\)).
            Sappiamo che \(P\) &egrave; individuata in \(\{P_{0},\cdots,P_{k}\}\) e \(Q\) in
            \(\{Q_{0},\cdots,Q_{k}\}\).
        <div class="img-fluid">
            <img src="images/retta.png" width="500">
        </div>

        \[P_{0} = a \quad , \quad P_{k} = b = Q_{0} \quad , \quad Q_{k} = c\]
        </p>


        <ul>
            <li class="job">
                <div class="left">
                    \(C^{0}\) - questo tipo di incollamento si ottiene con \(P_{k}=Q_{0}\).<br>
                    Ovvero che l'ultimo punto della prima curva deve coincidere con il primo punto della seconda
                    curva,
                    condizione abbastanza ovvia per poter assicurare l'incollamento.
                    <div>
                        <br>
                        <div style="text-align:center;">Incollamento di classe \(C^{0}\)</div>
                        <div class="img-fluid">
                            <img src="images/c0.png" width="500">
                        </div>
                    </div>
                </div>
            </li>
            <li class="fun">
                <div class="left">
                    \(C^{1}\) - questo tipo di incollamento si ottiene soddisfando \(C^{0}\) e \(P'(b)=Q'(b)\). Il
                    penultimo
                    punto della prima curva, l'ultimo punto della prima curva (che coincide con il primo della
                    seconda curva) ed il primo punto della seconda curva, devono essere sempre allineati. Inoltre
                    bisogna far si che il rapporto semplice dato dai 3 punti allineati deve coincidere con il
                    rapporto semplice dato dai 3 numeri reali \(a,b,c\) che costituiscono i nodi della Spline. Per
                    la realizzazione del progetto &egrave;
                    stata
                    implementata una curva Spline uniforme con incollamento di tipo \(C^{1}\).
                    <br>
                    <div>
                        <br>
                        <div style="text-align:center;">Incollamento di classe \(C^{1}\)</div>
                        <div class="img-fluid">
                            <img src="images/c1.png" width="500">
                        </div>
                    </div>
                </div>
            </li>
            <li class="event">
                <div class="left">
                    \(C^{2}\) - questo di incollamento si ottiene soddisfando \(C^{1}\) e \(P''(b)=Q''(b)\).
                    Deve esistere
                    un
                    punto di intersezione \(D\) chiamato punto di De Boor che si ottiene dall'intersezione di
                    \(P_{k-2},
                    P_{k-1}\) con \(Q_{1}, Q_{2}\). Devono essere inoltre mantenuti i rapporti semplici tra
                    \(P_{k-1},
                    P_{k}(=Q_{0}), Q_{1}\), \(P_{k-2}, P_{k-1}, D\) e \(D, Q_{1}, Q_{2}\) che devono coincidere con
                    il rapporto semplice dei 3 numeri reali \(a,b,c\).
                    <br>
                    <div>
                        <br>
                        <div style="text-align:center;">Incollamento di classe \(C^{2}\)</div>
                        <div class="img-fluid">
                            <img src="images/c2.png" height="400">
                        </div>

                    </div>
                </div>
            </li>
        </ul>


        <h2>
            Implementazione
        </h2>
        <p>
            La curva implementata, come detto precedentemente, &egrave; una curva Spline che presenta incollature di
            classe
            \(C^{1}\) di curve di B&eacute;zier di grado 3. Le funzioni che si occupano di calcolare la curva di B&eacute;zier
            in
            funzione del parametro \(t\) sono:
        </p>
        <div style="margin: auto auto auto auto; width: 60%;">
            <code style="font-size: 120%;">
                public Vector3 Lerp(Vector3 a, Vector3 b, float t)<br>
                {<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return Vector3.Lerp(a, b, t);<br>
                }<br><br>


                public Vector3 QuadraticLerp(Vector3 a, Vector3 b, Vector3 c, float t)<br>
                {<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Vector3 ab = Vector3.Lerp(a, b, t);<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Vector3 bc = Vector3.Lerp(b, c, t);<br>
                <br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return Vector3.Lerp(ab, bc, t);<br>
                }<br><br>


                public Vector3 CubicLerp(Vector3 a, Vector3 b, Vector3 c, Vector3 d, float t)<br>
                {<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Vector3 ac = QuadraticLerp(a, b, c, t);<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Vector3 bd = QuadraticLerp(b, c, d, t);<br>
                <br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return Vector3.Lerp(ac, bd, t);<br>
                }<br><br>
            </code>
        </div>
    </div>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-JEW9xMcG8R+ph21jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf"
            crossorigin="anonymous"></script>
</div>


</body>
</html>
